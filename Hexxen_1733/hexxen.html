<div class="sticky">
    
   
        <!--<img src="https://ulisses-spiele.de/wp-content/uploads/HeXXen1733_Logo_Fanwerk-300x212.png" />-->
        <button type="action" name="act_character" >Character</button>
        <button type="action" name="act_combat" >Combat</button>
        <button type="action" name="act_configuration" >Configuration</button>
<br>
        <label class="short">Hexxenwürfel</label><input class="sheet-textline" type="number" name="attr_hexxen" />
        <span name="attr_hexxenvaluename"></span>
        <label class="short">Januswürfel</label><input class="sheet-textline" type="number" name="attr_janus" />
        
        <button type='roll' name='roll_testattack' value='@{rollquery}'></button>
        <button type="action" name="act_resetroll">Reset</button>
</div>
<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='character'  />

<div class='sheet-character'>
<div class="2colrow">
	<div class="col">
		<h2>Charakter</h2>

        <label>Name</label><input class="sheet-textline" type="text" name="attr_character_name" />
        <br />
        <label>Jägerstufe</label><input class="sheet-textline" type="number" name="attr_rank" />
        <br />
        <label>Profession</label><input class="sheet-textline" type="text" name="attr_profession" />
        <br />
        <label>Motivation</label><input class="sheet-textline" type="text" name="attr_motivation" />
        <br />
        <label>Vorteil:</label><input class="sheet-textline" type="text" name="attr_advantage" />
        <br />
        <label>Verderbnis:</label><input class="sheet-textline" type="number" name="attr_verderbnis" />
        <label>Segnungen:</label><input class="sheet-textline" type="number" name="attr_segnungen" />

        <h2>Kleidungssets</h2>
        <label>Set No1</label><input class="sheet-textline" type="text" name="attr_armorset1" />
        <br />
        <label>Bonus</label><input class="sheet-textline" type="text" name="attr_armorset1_bonus" />
        <br />
        <label>Set No2</label><input class="sheet-textline" type="text" name="attr_armorset2" />
        <br />
        <label>Bonus</label><input class="sheet-textline" type="text" name="attr_armorset2_bonus" />
        <br />

        <h2>Jägerkräfte</h2>
        
        <fieldset class="repeating_hunterpowers">
            <input class='sheet-medium'  type="text" name="attr_hunterpowername" />
            <input class="sheet-textline" type="text" name="attr_hunterpowereffect" />
        </fieldset>

        <h2>Ausbaukräfte</h2>
        
        <fieldset class="repeating_powers">
            <input class='sheet-medium'  type="text" name="attr_powername"/>
            <input class="sheet-textline" type="text" name="attr_powereffect" />
        </fieldset>

	</div>

	<div class="col">
        <h2>Rollen</h2>
        <label>Rolle No1:</label><input class="sheet-textline" type="text" name="attr_role1" />
        <br />
        <label>Rolle No2:</label><input class="sheet-textline" type="text" name="attr_role2" />
        <br />
        <label>Rolle No3:</label><input class="sheet-textline" type="text" name="attr_role3" />

        <h2>Geld</h2>
        <label>Unterhalt</label><input class="sheet-textline" type="text" name="attr_unterhalt" />
        <br />
        <label>Vermögen</label><input class="sheet-textline" type="text" name="attr_vermoegen" />

        <h2>Restliche Ausrüstung</h2>
        <textarea name="attr_equipment"></textarea>

        <h2>Körperliche Attribute</h2>
        <div class="attributes">
            
            <label data-i18n="attribute_strength">Strength</label>
            <label class='short pureattribute' data-i18n="attribute_strength_short">Str</label>
            <input type="number" name='attr_str' class='number'>
            <button type='action' name='act_str'></button>
          
            <label data-i18n="attribute_athletic">Athletics</label>
            <label class='short pureattribute' data-i18n="attribute_athletic_short">Ath</label>
            <input type="number" name='attr_ath' class='number'>
            <button type='action' name='act_ath'></button>
        
            <label data-i18n="attribute_dexterity">Dexterity</label>
            <label class='short pureattribute' data-i18n="attribute_dexterity_short">Dex</label>
            <input type="number" name='attr_dex' class='number'>
            <button type='action' name='act_dex'></button>
        
            <label data-i18n="attribute_coups">Coups</label>
            <label class='short'>[=<span class="pureattribute" data-i18n="attribute_athletic_short">Ath</span>]</label>
            <input type="number" name='attr_coups' class='number'>
            <span class='item' name="attr_coups_max" ></span>
      
        </div>
        <h2>Geistige Attribute</h2>
        <div class="attributes">
            <label data-i18n="attribute_senses">Senses</label>
            <label class='short pureattribute' data-i18n="attribute_senses_short">Sen</label>
            <input type="number" name='attr_sen' class='number'>
            <button type='action' name='act_sen'></button>
          
            <label data-i18n="attribute_knowledge">Knowledge</label>
            <label class='short pureattribute' data-i18n="attribute_knowledge_short">Kno</label>
            <input type="number" name='attr_kno' class='number'>
            <button type='action' name='act_kno'></button>
          
            <label data-i18n="attribute_willpower">Willpower</label>
            <label class='short pureattribute' data-i18n="attribute_willpower_short">Wil</label>
            <input type="number" name='attr_wil' class='number'>
            <button type='action' name='act_wil'></button>
            
            <label data-i18n="attribute_ideas">Ideas</label>
            <label class='short'>[=<span class="pureattribute" data-i18n="attribute_knowledge_short">Kno</span>]</label>
            <input type="number" name='attr_ideas' class='number'>
            <span name="attr_ideas_max" ></span>
        </div>
        <h2>Abgleitete Ressourcen</h2>
        <div class="ressources">    
            <label data-i18n="attribute_hitpoints">Lebenspunkte</label>
            <label>[<span class="pureattribute" data-i18n="attribute_strength_short">Str</span>+<span class="pureattribute" data-i18n="attribute_willpower_short">Wil</span>+<span class="pureattribute">7</span>]</label>
            <input class='sheet-number' type="number" name="attr_hitpoints" />
            <span name="attr_hitpoints_max" ></span>
            
            <label data-i18n="attribute_initiative">Initiative</label>
            <label>[<span class="pureattribute" data-i18n="attribute_senses_short">Sen</span>+<span class="pureattribute" data-i18n="attribute_dexterity_short">Dex</span>]</label>
            <input class='sheet-number' type="number" name="attr_ini" />
        </div>

        <h2>Allgemeine Fertigkeiten</h2>
        <div class="skills">
            <h3>Name</h3><h3>FN</h3><h3>Attribut</h3><h3>SUM</h3><h3>Roll</h3>
            <!-- acrobatics -->
            <label class="item" data-i18n="skill_acrobatics">Akrobatik</label>
            <input class='number' type="number" name="attr_skill_acrobatics"/>
            <label class="attribute" data-i18n="attribute_athletic_short">Ath</label>
            <span name="attr_skill_acrobatics_max"></span>
            <button type='action' name='act_skill_acrobatics_max'></button>
            <!-- alertness -->
            <label class="item" data-i18n="skill_alertness">Aufmerksamkeit</label>
            <input class='number' type="number" name="attr_skill_alertness"/>
            <label class="attribute" data-i18n="attribute_senses_short">Sen</label>
            <span name="attr_skill_alertness_max"></span>
            <button type='action' name='act_skill_alertness_max'></button>
             <!-- perception -->
             <label class="item" data-i18n="skill_perception">Erkennen</label>
             <input class='number' type="number" name="attr_skill_perception"/>
             <label class="attribute" data-i18n="attribute_senses_short">Sen</label>
             <span name="attr_skill_perception_max"></span>
             <button type='action' name='act_skill_perception_max'></button>
              <!-- firstaid -->
            <label class="item" data-i18n="skill_firstaid">Erste Hilfe</label>
            <input class='number' type="number" name="attr_skill_firstaid"/>
            <label class="attribute" data-i18n="attribute_knowledge_short">Kno</label>
            <span name="attr_skill_firstaid_max"></span>
            <button type='action' name='act_skill_firstaid_max'></button>
             <!-- sleightofhand -->
             <label class="item" data-i18n="skill_sleightofhand">Fingerfertigkeit</label>
             <input class='number' type="number" name="attr_skill_sleightofhand"/>
             <label class="attribute" data-i18n="attribute_dexterity_short">Dex</label>
             <span name="attr_skill_sleightofhand_max"></span>
             <button type='action' name='act_skill_sleightofhand_max'></button>
              <!-- mentalpower -->
            <label class="item" data-i18n="skill_mentalpower">Geistesstärke</label>
            <input class='number' type="number" name="attr_skill_mentalpower"/>
            <label class="attribute" data-i18n="attribute_willpower_short">Wil</label>
            <span name="attr_skill_mentalpower_max"></span>
            <button type='action' name='act_skill_mentalpower_max'></button>
             <!-- crafting -->
             <label class="item" data-i18n="skill_crafting">Handwerken</label>
             <input class='number' type="number" name="attr_skill_crafting"/>
             <label class="attribute" data-i18n="attribute_dexterity_short">Dex</label>
             <span name="attr_skill_crafting_max"></span>
             <button type='action' name='act_skill_crafting_max'></button>
              <!-- stealth -->
            <label class="item" data-i18n="skill_stealth">Heimlichkeit</label>
            <input class='number' type="number" name="attr_skill_stealth"/>
            <label class="attribute" data-i18n="attribute_athletic_short">Ath</label>
            <span name="attr_skill_stealth_max"></span>
            <button type='action' name='act_skill_stealth_max'></button>
             <!-- countryandpeople -->
             <label class="item" data-i18n="skill_countryandpeople">Land und Leute</label>
             <input class='number' type="number" name="attr_skill_countryandpeople"/>
             <label class="attribute" data-i18n="attribute_knowledge_short">Kno</label>
             <span name="attr_skill_countryandpeople_max"></span>
             <button type='action' name='act_skill_countryandpeople_max'></button>
              <!-- rhetoric -->
            <label class="item" data-i18n="skill_rhetoric">Redekunst</label>
            <input class='number' type="number" name="attr_skill_rhetoric"/>
            <label class="attribute" data-i18n="attribute_willpower_short">Wil</label>
            <span name="attr_skill_rhetoric_max"></span>
            <button type='action' name='act_skill_rhetoric_max'></button>
             <!-- flexing -->
             <label class="item" data-i18n="skill_flexing">Muskelspiel</label>
             <input class='number' type="number" name="attr_skill_flexing"/>
             <label class="attribute" data-i18n="attribute_strength_short">Str</label>
             <span name="attr_skill_flexing_max"></span>
             <button type='action' name='act_skill_flexing_max'></button>
              <!-- reflexes -->
            <label class="item" data-i18n="skill_reflexes">Reflexe</label>
            <input class='number' type="number" name="attr_skill_reflexes"/>
            <label class="attribute" data-i18n="attribute_senses_short">Sen</label>
            <span name="attr_skill_reflexes_max"></span>
            <button type='action' name='act_skill_reflexes_max'></button>
             <!-- riding -->
             <label class="item" data-i18n="skill_riding">Reiten</label>
             <input class='number' type="number" name="attr_skill_riding"/>
             <label class="attribute" data-i18n="attribute_athletic_short">Ath</label>
             <span name="attr_skill_riding_max"></span>
             <button type='action' name='act_skill_riding_max'></button>
              <!-- insensibility -->
            <label class="item" data-i18n="skill_insensibility">Unempfindlichkeit</label>
            <input class='number' type="number" name="attr_skill_insensibility"/>
            <label class="attribute" data-i18n="attribute_strength_short">Str</label>
            <span name="attr_skill_insensibility_max"></span>
            <button type='action' name='act_skill_insensibility_max'></button>
             <!-- fieldsofknowledge -->
             <label class="item" data-i18n="skill_fieldsofknowledge">Wissensgebiete</label>
             <input class='number' type="number" name="attr_skill_fieldsofknowledge"/>
             <label class="attribute" data-i18n="attribute_knowledge_short">Kno</label>
             <span name="attr_skill_fieldsofknowledge_max"></span>
             <button type='action' name='act_skill_fieldsofknowledge_max'></button>
        </div>
	</div>

</div>
</div>
<div class='sheet-combat'>
    <h2>Anhaltende Einflüsse</h2>
    <div class="3colrow">
    <div class="influences">
    <h3>Art</h3><h3>Stufen</h3><h3>Anm.</h3><h3>Zustände</h3>

    <label class="item">Äußerer Schaden</label>
    <span class="item">
        <input type="radio" class="sheet-rating sheet-zero" name="attr_outerdamage" value="0" checked="checked" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_outerdamage" value="1" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_outerdamage" value="2" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_outerdamage" value="3" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_outerdamage" value="4" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_outerdamage" value="5" /><span></span>
    </span>
    <label class="item"></label>
    <input class="item textline" type="text" name="attr_outerdamage_conditions" />

    <label class="item">Innerer Schaden</label>
    <span class="item">
        <input type="radio" class="sheet-rating sheet-zero" name="attr_innerdamage" value="0" checked="checked" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_innerdamage" value="1" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_innerdamage" value="2" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_innerdamage" value="3" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_innerdamage" value="4" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_innerdamage" value="5" /><span></span>
    </span>
    <label class="item"></label>
    <input class="item textline" type="text" name="attr_innerdamage_conditions" />

    <label class="item">Malusschaden</label>
    <span class="item">
        <input type="radio" class="sheet-rating sheet-zero" name="attr_malusdamage" value="0" checked="checked" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_malusdamage" value="1" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_malusdamage" value="2" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_malusdamage" value="3" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_malusdamage" value="4" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_malusdamage" value="5" /><span></span>
    </span> 
    <label class="item"></label>
    <input class="item textline" type="text" name="attr_malusdamage_conditions" />

    <label class="item">Lähmungsschaden</label>
    <span class="item">
        <input type="radio" class="sheet-rating sheet-zero" name="attr_paralysisdamage" value="0" checked="checked" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_paralysisdamage" value="1" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_paralysisdamage" value="2" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_paralysisdamage" value="3" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_paralysisdamage" value="4" /><span></span>
        <input type="radio" class="sheet-rating" name="attr_paralysisdamage" value="5" /><span></span>
    </span>
    <label class="item">≤[Ap]</label>
    <input class="item textline" type="text" name="attr_paralysisdamage_conditions" />
    </div>
    </div>
    <br>
    <div class="3colrow">
        <div class="2col">
            <h2>Schutz und Gesundheit</h2>
            <label class="short">Panzerung</label>
            <input type="radio" class="sheet-normal" name="attr_armor" value="1" checked="checked"/><span></span><label class="short">Leicht (<span class="pureattribute">Pw1</span>)</label>
            <input type="radio" class="sheet-normal" name="attr_armor" value="2" /><span></span><label class="short">Mittel (<span class="pureattribute">Pw2</span>)</label>
            <input type="radio" class="sheet-normal" name="attr_armor" value="3" /><span></span><label class="short">Schwer (<span class="pureattribute">Pw3</span>)</label>
            <label>Puffer-[Lep]</label><input class='sheet-number' type="number" name="attr_bufferhitpoints" /> 
            <br>
            <label>Basis-[Lep]</label><span name="attr_hitpoints_max" ></span><label>Aktuell-[Lep]</label><input class='sheet-number' type="number" name="attr_hitpoints" />    
            <br>
            <label class="text note">Bei Basis-[Lep]≤-1 der Verlust alle Coups/Ideen, deren Benutzung unmöglich. Puffer-[Lep]=0</label>
        </div>
        <div class="col">
            <h2>Handlungen</h2>
            <label>Aktionspunkte</label><input type="number" class="number" name="attr_ap" value="(4 - @{armor})" disabled="disabled"  />
            <h2>Heilfaktor</h2>
            <label>Erste Hilfe [<span class="pureattribute">Eh</span>]</label>
            <span>
                <input type="radio" class="sheet-rating sheet-zero" name="attr_counter_firstaid" value="0" checked="checked" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_firstaid" value="1" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_firstaid" value="2" /><span></span>
            </span>
            <br>
            <label>Mag. Heilung [<span class="pureattribute">Mh</span>] & Elixiere</label>
            <span>
                <input type="radio" class="sheet-rating sheet-zero" name="attr_counter_magicalheal" value="0" checked="checked" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_magicalheal" value="1" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_magicalheal" value="2" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_magicalheal" value="3" /><span></span>
                <input type="radio" class="sheet-rating" name="attr_counter_magicalheal" value="4" /><span></span>
            </span>
        </div>
    </div>
    <div class="row">
    <hr/>
    <label>Initiative</label><span name="attr_ini"></span>
       
    <h2>Waffenübersicht</h2>
    <div class="weapons">
        <h3>Waffe dabei?</h3>
        <h3>Waffe</h3>
        <h3>Sch</h3>
        <h3>Ap</h3>
        <h3>Fw</h3>
        <h3>Attribut</h3>
        <h3>Summe</h3>
        <h3>Würfeln</h3>
        <h3>Anmerkungen</h3>

        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_punchactive" value="1" checked="true" /><span></span></span>
        <label class="item" data-i18n="weapon_punch">Punch</label>
        <label class="item">0</label>
        <label class="item">1</label>
        <input type="number" class="number" name="attr_weapon_punch" />
        <label class="item attribute" data-i18n="attribute_athletic_short">Ath</label>
        <span class="item" name="attr_weapon_punch_max"></span>
        <button type='action' class="roll attack" name='act_weapon_punch_max'></button>
        <label class="item note" data-i18n="weapon_punch_note">Parade -3, außer Fausthiebe</label>

        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_daggeractive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_dagger">Dolche & Messer</label>
        <label class="item">1</label>
        <label class="item">1</label>
        <input type="number" class="number" name="attr_weapon_dagger" />
        <label class="item attribute" data-i18n="attribute_dexterity_short">Dex</label>
        <span class="item" name="attr_weapon_dagger_max"></span>
        <button type='action' class="roll attack" name='act_weapon_dagger_max'></button>
        <label class="item note" data-i18n="weapon_dagger_note">Giftverwendung / Parade -2, außer Fausthiebe und Dolche & Messer</label>

        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_fencingactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_fencing">Fechtwaffen</label>
        <label class="item">2</label>
        <label class="item">1</label>
        <input type="number" class="number" name="attr_weapon_fencing" />
        <label class="item attribute" data-i18n="attribute_athletic_short">Ath</label>
        <span class="item" name="attr_weapon_fencing_max"></span>
        <button type='action' class="roll attack" name='act_weapon_fencing_max'></button>
        <label class="item note" data-i18n="weapon_fencing_note">Parade -1 pro gebundenem Gegner über dem Ersten</label>
        <!-- swords -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_swordsactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_swords">Schwertwaffen</label>
        <label class="item">3</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_swords" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_swords_max"></span>
        <button type='action' class="roll attack" name='act_weapon_swords_max'></button>
        <label class="item note" data-i18n="weapon_swords_note">Voll parierfähig</label>
        <!-- scimitar -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_scimitaractive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_scimitar">Säbelwaffen</label>
        <label class="item">4</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_scimitar" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_scimitar_max"></span>
        <button type='action' class="roll attack" name='act_weapon_scimitar_max'></button>
        <label class="item note" data-i18n="weapon_scimitar_note">Parade -1</label>
        <!-- scimitar -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_scimitaractive" value="1"  /><span></span></span>
        <label class="item" data-i18n="weapon_scimitar_mounted">(...beritten)</label>
        <label class="item">5</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_scimitar" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_scimitar_max"></span>
        <button type='action' class="roll attack" name='act_weapon_scimitar_max'></button>
        <label class="item note" data-i18n="weapon_scimitar_note">Parade -1</label>
        <!-- impact -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_impactactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_impact">Schlagwaffen</label>
        <label class="item">5</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_impact" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_impact_max"></span>
        <button type='action' class="roll attack" name='act_weapon_impact_max'></button>
        <label class="item note" data-i18n="weapon_impact_note">Parade -2</label>
        <!-- polearm -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_polearmactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_polearm">Stangenwaffen</label>
        <label class="item">6</label>
        <label class="item">3</label>
        <input type="number" class="number" name="attr_weapon_polearm" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_polearm_max"></span>
        <button type='action' class="roll attack" name='act_weapon_polearm_max'></button>
        <label class="item note" data-i18n="weapon_polearm_note">Parade kostet 2AP</label>
        <!-- polearm -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_polearmactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_polearm_mounted">(...geg. Reiter)</label>
        <label class="item">8</label>
        <label class="item">3</label>
        <input type="number" class="number" name="attr_weapon_polearm" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_polearm_max"></span>
        <button type='action' class="roll attack" name='act_weapon_polearm_max'></button>
        <label class="item note" data-i18n="weapon_polearm_note">Parade kostet 2AP</label>
        <!-- lance -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_lanceactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_lance">Lanzenwaffen</label>
        <label class="item">6</label>
        <label class="item">3</label>
        <input type="number" class="number" name="attr_weapon_lance" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_lance_max"></span>
        <button type='action' class="roll attack" name='act_weapon_lance_max'></button>
        <label class="item note" data-i18n="weapon_lance_note">Parade kostet 2AP</label>
        <!-- lance -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_lanceactive" value="1"/><span></span></span>
        <label class="item" data-i18n="weapon_lance_mounted">(...beritten)</label>
        <label class="item">7</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_lance" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_lance_max"></span>
        <button type='action' class="roll attack" name='act_weapon_lance_max'></button>
        <label class="item note" data-i18n="weapon_lance_note">Parade kostet 2AP</label>
        <!-- sling -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_slingactive" value="1"/><span></span></span>
        <label class="item" data-i18n="weapon_sling">Schleuder</label>
        <label class="item">1</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_sling" />
        <label class="item attribute" data-i18n="attribute_dexterity_short">Dex</label>
        <span class="item" name="attr_weapon_sling_max"></span>
        <button type='action' class="roll attack" name='act_weapon_sling_max'></button>
        <label class="item note" data-i18n="weapon_sling_note">Geschossgeeignet, Werfer muss freistehen</label>
        <!-- pistol -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_pistolactive" value="1"/><span></span></span>
        <label class="item" data-i18n="weapon_pistol">Pistole</label>
        <label class="item">3</label>
        <label class="item">2</label>
        <input type="number" class="number" name="attr_weapon_pistol" />
        <label class="item attribute" data-i18n="attribute_senses_short">Sen</label>
        <span class="item" name="attr_weapon_pistol_max"></span>
        <button type='action' class="roll attack" name='act_weapon_pistol_max'></button>
        <label class="item note" data-i18n="weapon_pistol_note">Immer freie Schussmöglichkeit</label>
        <!-- crossbow -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_crossbowactive" value="1"/><span></span></span>
        <label class="item" data-i18n="weapon_crossbow">Armbrust</label>
        <label class="item">5</label>
        <label class="item">3</label>
        <input type="number" class="number" name="attr_weapon_crossbow" />
        <label class="item attribute" data-i18n="attribute_senses_short">Sen</label>
        <span class="item" name="attr_weapon_crossbow_max"></span>
        <button type='action' class="roll attack" name='act_weapon_crossbow_max'></button>
        <label class="item note" data-i18n="weapon_crossbow_note">Schütze muss freistehen</label>
        <!-- musket -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_musketactive" value="1"/><span></span></span>
        <label class="item" data-i18n="weapon_musket">Muskete</label>
        <label class="item">8</label>
        <label class="item">3</label>
        <input type="number" class="number" name="attr_weapon_musket" />
        <label class="item attribute" data-i18n="attribute_senses_short">Sen</label>
        <span class="item" name="attr_weapon_musket_max"></span>
        <button type='action' class="roll attack" name='act_weapon_musket_max'></button>
        <label class="item note" data-i18n="weapon_musket_note">Schütze und Ziel müssen freistehen</label>
        <!-- dodge -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_dodgeactive" value="1" checked="true" /><span></span></span>
        <label class="item" data-i18n="weapon_dodge">Ausweichen</label>
        <label class="item">-</label>
        <label class="item">1</label>
        <input type="number" class="number" name="attr_weapon_dodge" />
        <label class="item attribute" data-i18n="attribute_athletic_short">Ath</label>
        <span class="item" name="attr_weapon_dodge_max"></span>
        <button type='action' class="roll attack" name='act_weapon_dodge_max'></button>
        <label class="item note" data-i18n="weapon_dodge_note">Pro geb. Gegner -1, Distanzangriffe -1</label>
        <!-- shield -->
        <span class="item"><input class="normal" type="checkbox" name="attr_weapon_shieldactive" value="1" /><span></span></span>
        <label class="item" data-i18n="weapon_shield">Schildbenutzung</label>
        <label class="item">-</label>
        <label class="item">1</label>
        <input type="number" class="number" name="attr_weapon_shield" />
        <label class="item attribute" data-i18n="attribute_strength_short">Str</label>
        <span class="item" name="attr_weapon_shield_max"></span>
        <button type='action' class="roll attack" name='act_weapon_shield_max'></button>
        <label class="item note" data-i18n="weapon_shield_note">Nur 1x pro Runde / Blockt Distanzangriffe</label>
    </div>
    <hr />
    <div>
		<label class="pureattribute" data-i18n="attribute_strength_short">Str</label><input type="number" name='attr_str' class='number'/>
		<label class="pureattribute" data-i18n="attribute_athletic_short">Ath</label><input type="number" name='attr_ath' class='number'/>
		<label class="pureattribute" data-i18n="attribute_dexterity_short">Dex</label><input type="number" name='attr_dex' class='number'/>
		<label class="pureattribute" data-i18n="attribute_senses_short">Sen</label><input type="number" name='attr_sen' class='number'/>
        <label class="pureattribute" data-i18n="attribute_knowledge_short">Kno</label><input type="number" name='attr_kno' class='number'/>
        <label class="pureattribute" data-i18n="attribute_willpower_short">Wil</label><input type="number" name='attr_wil' class='number'/>
    </div>
    </div>
    </div>
<div class='sheet-config'>
    <h2>Config/Settings</h2>
    <span>Sheet Config/Settings goes here</span> 
</div>

<script type="text/worker">

    const buttonlist = ["character","combat","configuration"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    on("change:janus change:hexxen", () =>{
        let attributeName = "hexxen";
        getAttrs(["janus", attributeName], function(values) {
            let janusValue = parseInt(values["janus"],10)||0;
            let attributeValue = parseInt(values[attributeName],10)||0;
            let query = "&{template:ova} {{name=@{character_name}}} {{attr=@{hexxenvaluename}}} {{attr_val="+attributeValue+"}}";
            var i;
            for (i = 1; i <= attributeValue; i++) {
                query = query + " {{hexxen"+i+"=[[d6cs>5]]}}";
            }
            for (i = 1; i <= janusValue; i++) {
                query = query + " {{janus"+i+"=[[d6cs>4cf]]}}";
            }
            
            query = query + " {{blessing1=[[d6cs>4cf1cf2]]}}";
            setAttrs({                            
                rollquery: query
            });
        });
    });

    on(`clicked:resetroll`, function(value) {
        setAttrs({
            hexxen: 0,
            janus: 0,
            hexxenvaluename: 'empty'
        });
    });
   
    const rolllist = ['str', 'ath', 'dex', 'sen', 'kno', 'wil',
     'skill_acrobatics_max',
        'skill_alertness_max',
        'skill_perception_max',
        'skill_firstaid_max',
        'skill_sleightofhand_max',
        'skill_mentalpower_max',
        'skill_crafting_max',
        'skill_stealth_max',
        'skill_countryandpeople_max',
        'skill_rhetoric_max',
        'skill_flexing_max',
        'skill_reflexes_max',
        'skill_riding_max',
        'skill_insensibility_max',
        'skill_fieldsofknowledge_max',
        'weapon_punch_max',
        'weapon_dagger_max',
        'weapon_fencing_max',
        'weapon_swords_max',
        'weapon_scimitar_max',
        'weapon_impact_max',
        'weapon_polearm_max',
        'weapon_lance_max',
        'weapon_sling_max',
        'weapon_pistol_max',
        'weapon_crossbow_max',
        'weapon_musket_max',
        'weapon_dodge_max',
        'weapon_shield_max'];
    rolllist.forEach(button => {
        on(`clicked:${button}`, function() {
            getAttrs([button], function(values) {
                let v = parseInt(values[button],10)||0;
                let key = button;
                if(key.endsWith('_max'))
                    key = key.replace('_max', '');

                let valuename = getTranslationByKey(key);
                setAttrs({
                    hexxen: v,
                    hexxenvaluename: valuename
                });
            });
        });
    });

    on("change:ath", function() {
        getAttrs(["ATH"], function(values) {
            let ath = parseInt(values.ATH,10)||0;
            setAttrs({                            
                coups_max: ath
            });
          });
    });
    on("change:kno", function() {
        getAttrs(["KNO"], function(values) {
            let kno = parseInt(values.KNO,10)||0;
            setAttrs({                            
                ideas_max: kno
            });
          });
    });
    on("change:str change:wil", function() {
        getAttrs(["STR", "WIL"], function(values) {
            let str = parseInt(values.STR,10)||0;
            let wil = parseInt(values.WIL,10)||0;
            let hp = str + wil + 7;
            setAttrs({                            
                hitpoints_max: hp
            });
          });
    });
    on("change:sen change:dex", function() {
        getAttrs(["SEN", "DEX"], function(values) {
            let sen = parseInt(values.SEN,10)||0;
            let dex = parseInt(values.DEX,10)||0;
            let ini = sen + dex;
            setAttrs({                            
                ini: ini
            });
          });
    });

    const skills = {
        'skill_acrobatics':{att: 'ath'},
        'skill_alertness':{att: 'sen'},
        'skill_perception':{att: 'sen'},
        'skill_firstaid':{att: 'kno'},
        'skill_sleightofhand':{att: 'dex'},
        'skill_mentalpower':{att: 'wil'},
        'skill_crafting':{att: 'dex'},
        'skill_stealth':{att: 'ath'},
        'skill_countryandpeople':{att: 'kno'},
        'skill_rhetoric':{att: 'wil'},
        'skill_flexing':{att: 'str'},
        'skill_reflexes':{att: 'sen'},
        'skill_riding':{att: 'ath'},
        'skill_insensibility':{att: 'str'},
        'skill_fieldsofknowledge':{att: 'kno'},

        'weapon_punch':{att: 'ath'},
        'weapon_dagger':{att: 'dex'},
        'weapon_fencing':{att: 'ath'},
        'weapon_swords' :{att: 'str'},
        'weapon_scimitar' :{att: 'str'},
        'weapon_impact' :{att: 'str'},
        'weapon_polearm' :{att: 'str'},
        'weapon_lance' :{att: 'str'},
        'weapon_sling' :{att: 'dex'},
        'weapon_pistol' :{att: 'sen'},
        'weapon_crossbow' :{att: 'sen'},
        'weapon_musket' :{att: 'sen'},
        'weapon_dodge' :{att: 'ath'},
        'weapon_shield' :{att: 'str'},
    };
    Object.keys(skills).forEach(skill => {  
        let attributeName = skills[skill].att;   
        on(`change:${skill} change:${attributeName}`, () => {
            getAttrs([skill, attributeName], function(values) {
                let skillValue = parseInt(values[skill],10)||0;
                let attributeValue = parseInt(values[attributeName],10)||0;
                let v = skillValue + attributeValue;
                setAttrs({                            
                    [`${skill}_max`]: v
                });
            });
        });
    });

    on("sheet:opened", function(eventInfo){
    
        setAttrs({
            rollquery: "!hxx h",
            attackquery: "!hxx h"
        });
        
    });

    </script>

    <rolltemplate class="sheet-rolltemplate-hxx">
        <span value="15"></span>
        <table>
            <tr><th colspan="2">{{name}} rolls</th></tr>
            <tr><td class="attr" colspan="2">
                {{#attr}}
                    {{attr}}({{attr_num}})
                {{/attr}}
            </td></tr>
            <tr>
                <td class="result">{{hexxen}}</td><td class="resultname">Successes</td>        
            </tr>
            <tr>
                <td class="result">{{janus}}</td><td class="resultname">Janus</td>        
            </tr>
            <tr>
                <td class="result">{{esprit}}</td><td class="resultname">Esprit</td>        
            </tr>
        </table>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-ova">
		<div class="sheet-rtcard">
            {{#name}}
            <h3>{{name}}</h3>
            {{/name}}
            {{#attr}}
                <h3>{{attr}}{{#attr_val}}({{attr_val}}{{/attr_val}})</h3>
            {{/attr}}
            

            <!--
            {{#allprops()}}
					{{key}}={{value}}<br>

                {{/allprops()}}
                -->
            {{#hexxen1}}
            {{#rollTotal() hexxen1 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen1 1}}
            {{#rollBetween() hexxen1 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen1 2 4}}
            {{#rollBetween() hexxen1 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen1 5 6}}
            {{/hexxen1}}

            {{#hexxen2}}
            {{#rollTotal() hexxen2 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen2 1}}
            {{#rollBetween() hexxen2 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen2 2 4}}
            {{#rollBetween() hexxen2 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen2 5 6}}
            {{/hexxen2}}

            {{#hexxen3}}
            {{#rollTotal() hexxen3 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen3 1}}
            {{#rollBetween() hexxen3 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen3 2 4}}
            {{#rollBetween() hexxen3 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen3 5 6}}
            {{/hexxen3}}

            {{#hexxen4}}
            {{#rollTotal() hexxen4 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen4 1}}
            {{#rollBetween() hexxen4 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen4 2 4}}
            {{#rollBetween() hexxen4 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen4 5 6}}
            {{/hexxen4}}

            {{#hexxen5}}
            {{#rollTotal() hexxen5 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen5 1}}
            {{#rollBetween() hexxen5 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen5 2 4}}
            {{#rollBetween() hexxen5 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen5 5 6}}
            {{/hexxen5}}

            {{#hexxen6}}
            {{#rollTotal() hexxen6 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen6 1}}
            {{#rollBetween() hexxen6 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen6 2 4}}
            {{#rollBetween() hexxen6 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen6 5 6}}
            {{/hexxen6}}

            {{#hexxen7}}
            {{#rollTotal() hexxen7 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen7 1}}
            {{#rollBetween() hexxen7 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen7 2 4}}
            {{#rollBetween() hexxen7 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen7 5 6}}
            {{/hexxen7}}

            {{#hexxen8}}
            {{#rollTotal() hexxen8 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen8 1}}
            {{#rollBetween() hexxen8 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen8 2 4}}
            {{#rollBetween() hexxen8 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen8 5 6}}
            {{/hexxen8}}

            {{#hexxen9}}
            {{#rollTotal() hexxen9 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen9 1}}
            {{#rollBetween() hexxen9 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen9 2 4}}
            {{#rollBetween() hexxen9 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen9 5 6}}
            {{/hexxen9}}

            {{#hexxen10}}
            {{#rollTotal() hexxen10 1}}<span class="hexxen esprit"></span>{{/rollTotal() hexxen10 1}}
            {{#rollBetween() hexxen10 2 4}}<span class="hexxen empty"></span>{{/rollBetween() hexxen10 2 4}}
            {{#rollBetween() hexxen10 5 6}}<span class="hexxen success"></span>{{/rollBetween() hexxen10 5 6}}
            {{/hexxen10}}
            <!--<br>-->

            {{#janus1}}
            {{#rollBetween() janus1 1 3}}<span class="janus empty"></span>{{/rollBetween() janus1 1 3}}
            {{#rollBetween() janus1 4 6}}<span class="janus success"></span>{{/rollBetween() janus1 4 6}}
            {{/janus1}}

            {{#janus2}}
            {{#rollBetween() janus2 1 3}}<span class="janus empty"></span>{{/rollBetween() janus2 1 3}}
            {{#rollBetween() janus2 4 6}}<span class="janus success"></span>{{/rollBetween() janus2 4 6}}
            {{/janus2}}

            {{#janus3}}
            {{#rollBetween() janus3 1 3}}<span class="janus empty"></span>{{/rollBetween() janus3 1 3}}
            {{#rollBetween() janus3 4 6}}<span class="janus success"></span>{{/rollBetween() janus3 4 6}}
            {{/janus3}}

            {{#janus4}}
            {{#rollBetween() janus4 1 3}}<span class="janus empty"></span>{{/rollBetween() janus4 1 3}}
            {{#rollBetween() janus4 4 6}}<span class="janus success"></span>{{/rollBetween() janus4 4 6}}
            {{/janus4}}

            {{#janus5}}
            {{#rollBetween() janus5 1 3}}<span class="janus empty"></span>{{/rollBetween() janus5 1 3}}
            {{#rollBetween() janus5 4 6}}<span class="janus success"></span>{{/rollBetween() janus5 4 6}}
            {{/janus5}}
            <!--<br>-->
            {{#blessing1}}
            {{#rollBetween() blessing1 1 2}}<span class="blessing esprit"></span>{{/rollBetween() blessing1 1 2}}
            {{#rollTotal() blessing1 3}}<span class="blessing empty"></span>{{/rollTotal() blessing1 3}}
            {{#rollBetween() blessing1 4 5}}<span class="blessing success"></span>{{/rollBetween() blessing1 4 5}}
            {{#rollTotal() blessing1 6}}<span class="blessing doublesuccess"></span>{{/rollTotal() blessing1 6}}
            {{/blessing1}}

            Erfolge:<span class="sheet-rtresult_hexxen"></span>
            Janus:<span class="sheet-rtresult_janus"></span>
            Esprit:<span class="sheet-rtresult_esprit"></span>
		</div>
	</rolltemplate>